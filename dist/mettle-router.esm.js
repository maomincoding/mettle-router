/*!
 * Mettle-router v0.6.2
 * (c) 2021-2025 maomincoding
 * Released under the MIT License.
 */
const t="0.6.2",e={path:"",isMounted:!1,_template:null};function n(t){return window.addEventListener("hashchange",t,!1),()=>{window.removeEventListener("hashchange",t,!1)}}function o(t,o,i){return"function"==typeof o&&n((()=>{e.path=l(),e.isMounted=!1;const n=r(e.path,t);o(n,i)})),function(){if(e.path)return r(e.path,t);if(location.hash){const n=l();return e.isMounted,r(n,t)}return"/index.html"===location.pathname?r("/",t):r(location.pathname,t)}()}function r(t,n){for(let o=0;o<n.length;o++){const r=n[o];if(r.path===t){if(e.isMounted)return e._template;const t=r.template;return e.isMounted=!0,e._template=t,e._template}}}function i(t){var n;"string"==typeof t||"object"===(n=t,Object.prototype.toString.call(n).match(/\[object (.+?)\]/)[1].toLowerCase())?"string"==typeof t?(window.location.href=`${h()}#${t}`,e.path=t):t.path&&"string"==typeof t.path?(t.query?window.location.href=`${h()}#${t.path}?${function(t){const e=[];for(let n in t)e.push(`${n}=${c(t[n])}`);return e.join("&")}(t.query)}`:window.location.href=`${h()}#${t.path}`,e.path=t.path):console.error("[mettle-router error]: the first parameter of function linkTo should have a param called path with string when it is an ordinary object"):console.error("[mettle-router error]: the first parameter of function linkTo should be a string or a object")}function a(){const t=decodeURIComponent(location.href.split("?")[1]).replace(/\+/g," ");if(!t)return{};const e={};return t.split("&").forEach((t=>{const n=t.indexOf("=");if(-1!==n){const o=t.substring(0,n),r=t.substring(n+1,t.length);e[o]=r}})),e}function c(t){return t=(t=(t=(t=(t=(t=(t=(t=(t+="").replace(/%/g,"%25")).replace(/\+/g,"%2B")).replace(/ /g,"%20")).replace(/\//g,"%2F")).replace(/\?/g,"%3F")).replace(/&/g,"%26")).replace(/\=/g,"%3D")).replace(/#/g,"%23")}function l(){return-1!==location.hash.indexOf("?")?location.hash.split("#")[1].split("?")[0]:location.hash.split("#")[1]}function h(){const t=window.location.href,e=t.indexOf("#");return`${e>=0?t.slice(0,e):t}`}export{n as hashChange,o as initRouter,i as linkTo,t as routerVersion,a as toParse};
